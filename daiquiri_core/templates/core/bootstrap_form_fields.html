{% load widget_tweaks %}
{% load core_tags %}

{% for hidden in form.hidden_fields %}
    {{ hidden }}
{% endfor %}

{% for field in form.visible_fields %}
    <div class="form-group{% if field.errors %} has-error{% endif %} field-{{field.html_name}}">

        {% with field|widget_type as type %}
        {% if type == 'checkboxinput' %}

        <div class="checkbox">
            <label>
                {{ field }}
                {{ field.label }}
            </label>
        </div>

        {% else %}

        <label for="{{ field.id_for_label }}">{{ field.label }}</label>
        {% render_field field class="form-control" %}

        {% endif %}
        {% endwith %}

        {% if field.errors %}
        <div class="help-block error">
            <p class="text-danger">{{ field.errors.as_text}}</p>
        </div>
        {% endif %}

        <div class="help-block info">
            {{ field.help_text }}
            {{ helptext }}
            {% block helptext %}{% endblock %}
        </div>
    </div>
{% endfor %}
