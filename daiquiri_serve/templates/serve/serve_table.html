{% extends 'core/wide.html' %}
{% load staticfiles %}
{% load compress %}
{% load i18n %}
{% load core_tags %}

{% block bodyargs %}ng-app="serve_table" ng-controller="ServeTableController"{% endblock %}

{% block headextra %}
    {% compress css %}
    <link rel="stylesheet" type="text/x-scss" href="{% static 'core/css/browser.scss' %}" />
    <link rel="stylesheet" type="text/x-scss" href="{% static 'serve/css/serve_table.scss' %}" />
    {% endcompress %}

    {% compress js %}
    <script type="text/javascript" src="{% static 'angular/angular.min.js' %}" ></script>
    <script type="text/javascript" src="{% static 'angular-resource/angular-resource.min.js' %}" ></script>

    <script type="text/javascript" src="{% static 'core/js/core.js' %}" ></script>
    <script type="text/javascript" src="{% static 'core/js/byNumber.js' %}" ></script>
    <script type="text/javascript" src="{% static 'core/js/table.js' %}" ></script>

    <script type="text/javascript" src="{% static 'serve/js/serve_table.js' %}" ></script>
    {% endcompress %}
{% endblock %}

{% block headline %}

    <h2>{{ database }}.{{ table }}</h2>

{% endblock %}

{% block wide %}

    <div class="row">
        <div class="col-sm-9">
            <ul class="pagination">
                <li>
                    <a href="" ng-click="table.first()">{% trans 'First' %}</a>
                </li>
                <li>
                    <a href="" ng-click="table.previous()">{% trans 'Previous' %}</a>
                </li>
                <li>
                    <a href="" ng-click="table.next()">{% trans 'Next' %}</a>
                </li>
                <li>
                    <a href="" ng-click="table.last()">{% trans 'Last' %}</a>
                </li>
            </ul>
        </div>

        <div class="col-sm-3">
            <select class="form-control" ng-model="table.config.page_size" ng-change="table.fetch()" by-number>
                <option value="{$ value $}" ng-repeat="value in [10, 20, 100]">
                    {% blocktrans with value="{$ value $}" count="{$ table.count $}" trimmed %}
                    Show {{ value }} of {{ count }} rows
                    {% endblocktrans %}
                </option>
            </select>
        </div>
    </div>

    <div daiquiri-table
        data-database="{{ database }}"
        data-table="{{ table }}">
    </div>

{% endblock %}
