{% extends 'core/wide.html' %}
{% load staticfiles %}
{% load i18n %}
{% load compress %}

{% block bodyargs %}ng-app="examples" ng-controller="ExamplesController"{% endblock %}

{% block headextra %}
    {% compress css %}
    <link rel="stylesheet" type="text/x-scss" href="{% static 'query/css/examples.scss' %}" />
    {% endcompress %}

    {% compress js %}
    <script type="text/javascript" src="{% static 'angular/angular.min.js' %}" ></script>
    <script type="text/javascript" src="{% static 'angular-resource/angular-resource.min.js' %}" ></script>
    <script type='text/javascript' src="{% static 'ngInfiniteScroll/build/ng-infinite-scroll.min.js' %}"></script>

    <script type="text/javascript" src="{% static 'core/js/core.js' %}" ></script>
    <script type="text/javascript" src="{% static 'core/js/filter.js' %}" ></script>
    <script type="text/javascript" src="{% static 'core/js/multiCheckbox.js' %}" ></script>
    <script type="text/javascript" src="{% static 'core/js/byNumber.js' %}" ></script>
    <script type="text/javascript" src="{% static 'core/js/formgroup.js' %}" ></script>

    <script type="text/javascript" src="{% static 'query/js/examples.js' %}" ></script>
    {% endcompress %}
{% endblock %}

{% block wide %}

    <h1>Example queries</h1>

        <div class="btn-group wide pull-right">
            <button type="button" class="btn btn-default"
                    ng-click="service.modal('examples-modal-form', $index)">
                {% trans 'Create new example' %}
            </button>
        </div>


    <table class="table list-table" infinite-scroll="service.scroll()" infinite-scroll-distance="0.2">
        <thead>
            <th style="width: 20%;">{% trans 'Order Nr.' %}
            <div class="order" ng-click="table.order(column.name)">
                                <i ng-class="{
                                    'fa fa-chevron-down': !table.config.ordering.endsWith(column.name),
                                    'ordered fa fa-chevron-down': table.config.ordering == column.name,
                                    'ordered fa fa-chevron-up': table.config.ordering == '-' + column.name
                                }" aria-hidden="true"></i>
                            </div></th>

            <th style="width: 50%">{% trans 'Name' %}</th>
            <th style="width: 30%;">{% trans 'Published for' %}</th>
        </thead>
        <tbody>
            <tr ng-repeat="row in service.rows">
                <td>
                    <span ng-show="row.order">{$ row.order $}</span>
                </td>
                <td>
                    <a href="" ng-click="service.modal('show-example-modal', $index)">
                       <span ng-show="row.name"> {$ row.name $} </span>
                    </a>
                </td>
                <td>
                    <ul class="list-unstyled">
                        <li ng-repeat="group_id in row.groups">
                            {$ service.groups_map[group_id] $}
                         </li>
                    </ul>

                </td>
                <td class="text-right list-table-options">
                        {% include 'query/example_options.html' %}
                </td>
               </tr>
        </tbody>
    </table>

     {% include 'query/examples_modal_show_example.html' %}
     {% include 'query/examples_modal_form.html' %}

{% endblock %}